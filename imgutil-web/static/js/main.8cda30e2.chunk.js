(this["webpackJsonpimgutil-web"]=this["webpackJsonpimgutil-web"]||[]).push([[0],{86:function(e,t,n){},88:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var i=n(13),a=n(0),s=n.n(a),r=n(16),o=n.n(r),c=(n(86),n(75)),l=n(46),d=n(60),g=n(61),u=n(33),j=n(80),b=n(76),p=(n(87),n(100)),m=n(98),f=n(27),h=n(97),v=n(99),O=n(101),x=n(103),U=n(104),y=n(30),C=n(105),I=n(62),S=n.n(I);n(88);var k=function(e,t){if(e){var n,i=null===(n=window.localStorage)||void 0===n?void 0:n.getItem(e);if(i)return JSON.parse(i)}return t}("config",{serverUrl:"http://localhost"}),w=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var i;return Object(d.a)(this,n),(i=t.call(this,e)).state={settingsVisible:!1,editingConfig:{},imageUploaded:!1,srcImage:{},dstImage:{}},i.uploadFileList=[],i.getUploadProps=i.getUploadProps.bind(Object(u.a)(i)),i.onUpdateConfig=i.onUpdateConfig.bind(Object(u.a)(i)),i.onConfigUpdated=i.onConfigUpdated.bind(Object(u.a)(i)),i.onUploadImage=i.onUploadImage.bind(Object(u.a)(i)),i}return Object(g.a)(n,[{key:"getUploadProps",value:function(){var e=this;return{accept:"image/*",showUploadList:!1,beforeUpload:function(t){return"image/jpeg"===t.type||"image/png"===t.type?t.size/1024/1024<10?(e.onUploadImage(t),!1):(p.b.error("Image must smaller than 10MB!"),!1):(p.b.error("You can only upload JPG/PNG file!"),!1)}}}},{key:"onUploadImage",value:function(e){var t=this;this.setState({srcImage:{},dstImage:{},imageUploaded:!0});var n=new FileReader;n.addEventListener("load",(function(){t.setState({srcImage:{url:n.result}})}),!1),n.readAsDataURL(e);var i=new FormData;i.append("image",e),fetch("".concat(k.serverUrl,"/image/cartoon"),{method:"POST",body:i}).then((function(e){return e.blob()})).then((function(e){t.setState({dstImage:{blob:e,url:URL.createObjectURL(e)}})}))}},{key:"onUpdateConfig",value:function(e,t){var n=Object(l.a)({},this.state.editingConfig);n[e]=t.target.value,this.setState({editingConfig:n})}},{key:"onConfigUpdated",value:function(){for(var e=this.state.editingConfig,t=0,n=Object.entries(e);t<n.length;t++){var i=Object(c.a)(n[t],2),a=i[0],s=i[1];k[a]=s}!function(e,t){var n;e&&void 0!==t&&null!==t&&(null===(n=window.localStorage)||void 0===n||n.setItem(e,JSON.stringify(t)))}("config",k)}},{key:"renderSettings",value:function(){var e=this,t=this.state.editingConfig;return Object(i.jsxs)("div",{style:{margin:"8px"},children:[Object(i.jsx)(m.a,{style:{margin:"16px"},value:t.serverUrl,onChange:function(t){return e.onUpdateConfig("serverUrl",t)}}),Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)("span",{style:{flex:"auto"}}),Object(i.jsx)(f.a,{onClick:function(t){return e.setState({settingsVisible:!1})},children:"Cancel"}),Object(i.jsx)(f.a,{type:"primary",style:{margin:"0 0 0 16px"},onClick:function(t){e.setState({settingsVisible:!1}),e.onConfigUpdated(!1)},children:"OK"})]})]})}},{key:"renderUploadButton",value:function(){var e=this,t=this.state.imageUploaded;return Object(i.jsx)(h.a,Object(l.a)(Object(l.a)({},this.getUploadProps()),{},{fileList:this.uploadFileList,children:Object(i.jsx)(f.a,{icon:Object(i.jsx)(U.a,{}),onClick:function(){e.uploadFileList=[]},style:{margin:"16px 16px 0 0"},children:t?"Upload another image?":"Upload an image"})}))}},{key:"renderSrcImage",value:function(){var e=this.state.srcImage.url;return e?Object(i.jsx)("img",{src:e,className:"img-container",alt:""}):Object(i.jsxs)("div",{children:["Loading image....",Object(i.jsx)(y.a,{})]})}},{key:"renderDstImage",value:function(){var e=this.state.dstImage,t=e.blob,n=e.url;if(n){var a=Object(i.jsx)(v.a,{onClick:function(e){e.item,e.key;S.a.saveAs(t,"imgutil.jpeg")},children:Object(i.jsx)(v.a.Item,{children:"Download"},"download")});return Object(i.jsx)(O.a,{overlay:a,placement:"bottomCenter",arrow:!0,children:Object(i.jsx)("img",{src:n,className:"img-container",alt:""})})}return Object(i.jsxs)("div",{children:["Working hard on it....",Object(i.jsx)(y.a,{})]})}},{key:"render",value:function(){var e=this,t=this.state,n=t.settingsVisible,a=t.imageUploaded;return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)("span",{className:"app-title",children:"Bruce's Image Utilities - Cartoonize Image"}),Object(i.jsx)("span",{style:{flex:"auto"}}),Object(i.jsx)(x.a,{placement:"topLeft",title:"Settings",visible:n,onVisibleChange:function(t){e.setState({editingConfig:Object(l.a)({},k),settingsVisible:t})},content:this.renderSettings.bind(this),trigger:"click",children:Object(i.jsx)(C.a,{})})]}),this.renderUploadButton(),Object(i.jsxs)("div",{children:[a&&this.renderSrcImage(),a&&this.renderDstImage()]})]})}}]),n}(s.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};o.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root")),L()}},[[93,1,2]]]);
//# sourceMappingURL=main.8cda30e2.chunk.js.map